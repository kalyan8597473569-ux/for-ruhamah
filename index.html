<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>For the one with the sweetest smile â¤ï¸</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
:root{
  --bg1:#ffe0f0; --bg2:#f7b7cf;
  --accent1:#e57399; --accent2:#cc507e;
  --card:#fff7fb; --muted:#7d6a71;
  --title-color:#8b455d; 
}
@keyframes slideIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes softPulse {
  0% { transform: scale(1); box-shadow: 0 15px 40px rgba(0,0,0,.12); }
  50% { transform: scale(1.005); box-shadow: 0 16px 45px rgba(0,0,0,.15); } 
  100% { transform: scale(1); box-shadow: 0 15px 40px rgba(0,0,0,.12); }
}
html,body{
  height:100%; margin:0;
  font-family:system-ui, sans-serif;
  background:linear-gradient(135deg,var(--bg1),var(--bg2));
  display:flex; align-items:center; justify-content:center;
  overflow: hidden;
}

.panel{
  width:calc(100% - 40px); max-width:400px;
  background:var(--card);
  border-radius:18px;
  padding:25px;
  text-align:center;
  display:flex; flex-direction:column; gap:14px;
  transition:all .4s ease-in-out;
  animation: softPulse 4s infinite ease-in-out, slideIn 0.5s ease-out;
  box-sizing: border-box;
  z-index: 10;
}
#step0 { animation: none; box-shadow:0 15px 40px rgba(0,0,0,.12); }
.hidden{display:none}
h1,h2{
  margin:0; color:var(--title-color);
  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.4);
  font-weight: 800; 
}
.muted{color:var(--muted);font-size:15px}
.small{font-size:13px;color:var(--muted)}
.btn{
  background:linear-gradient(135deg,var(--accent1),var(--accent2));
  color:#fff;border:none;
  padding:14px 22px;border-radius:999px;
  font-weight:700;cursor:pointer;
  transition:transform .2s;
  width: fit-content; align-self: center;
}
.btn:hover{ transform:scale(1.03); }

input, textarea {
  width: 100%; padding: 12px;
  border-radius: 10px; border: 1px solid #e0e0e0;
  box-sizing: border-box; font-family: inherit; text-align: center;
}
#nameInput { font-size: 1.1em; font-weight: 700; }
textarea { min-height: 80px; resize: none; }

.countdown{display:flex;gap:12px;justify-content:center}
.cd{
  background:#fff; padding:10px 12px;
  border-radius:12px; min-width:55px;
  box-shadow:inset 0 2px 4px rgba(0,0,0,.1);
}
.cd div{font-size:1.4em;font-weight:bold;color:var(--accent2)}

.photo{
  width:220px; height:220px;
  border-radius:14px; object-fit:cover;
  box-shadow:0 10px 24px rgba(0,0,0,.06);
  display: block; margin: 10px auto;
  transform: rotate(-2deg);
  transition: transform 0.3s, box-shadow 0.3s;
}
.photo:hover { transform: rotate(0deg) scale(1.05); box-shadow: 0 15px 30px rgba(0,0,0,.15); }

.gifts{display:flex;gap:12px;justify-content:center}
.gift{
  width:85px;height:105px;
  background:linear-gradient(#fff,#ffe8f2);
  border-radius:14px;
  display:flex;align-items:center;justify-content:center;
  font-size:26px;cursor:pointer;
  animation: softPulse 3s infinite ease-in-out;
}
.gift.hide{opacity:0;pointer-events:none}
.final-message {
  padding: 15px;
  border: 2px dashed var(--accent1); 
  border-radius: 12px;
  background: #ffe8f2; 
  line-height: 1.6;
}
</style>
</head>
<body>

<audio id="bgMusic" loop>
  <source src="song.mp3" type="audio/mpeg">
</audio>

<div id="step0" class="panel">
<h1><i class="fas fa-calendar-day"></i> The Grand Countdown</h1>
<p class="muted">Your special message unlocks on **December 28th** ğŸ‚</p>
<div class="countdown">
  <div class="cd"><div id="d">0</div>days</div>
  <div class="cd"><div id="h">0</div>hrs</div>
  <div class="cd"><div id="m">0</div>min</div>
  <div class="cd"><div id="s">0</div>sec</div>
</div>
<p id="locked" class="small">Come back on Dec 28 â¤ï¸</p>
<button id="openNow" class="btn hidden">Unlock Your Surprise ğŸ‰</button>
<p class="small">(tap anywhere 7 times for admin access)</p>
</div>

<div id="step1" class="panel hidden">
<h1><i class="fas fa-key"></i> Identify Yourself</h1>
<p class="small">Enter your name to unlock.</p>
<input id="nameInput" placeholder="Who is this?">
<p id="nameHint" class="small"></p>
<button id="nameBtn" class="btn">Continue</button>
</div>

<div id="step2" class="panel hidden">
<h2>Hello, My Dear Ruhh <i class="fas fa-hand-sparkles"></i></h2>
<p class="muted">This little corner of the internet was made just for you.</p>
<button class="btn" onclick="show('step3')">Read My Message</button>
</div>

<div id="step3" class="panel hidden">
<h2><i class="fas fa-envelope-open-text"></i> A Few Words...</h2>
<p class="muted">Before we proceed, allow me a brief moment from the heart.</p>
<button class="btn" onclick="show('step4')">Continue</button>
</div>

<div id="step4" class="panel hidden">
<h2><i class="fas fa-heart-circle-check"></i> My Favorite Things</h2>
<div style="white-space:pre-wrap;color:var(--title-color);font-size:15px;font-weight:600; text-align:left; padding-left:10px; display:flex; flex-direction:column; gap:8px;">
* The thoughtful way you talk. ğŸ’¬
* The effortless sound of your laugh. ğŸ˜‚
* Your sweet smile that stops me in my tracks. âœ¨
* Your beautiful mind and how you're so good at English. ğŸ“š
<br>
* **The fact that I always lose to you...** ğŸ³ï¸ because losing to you truly feels like winning anyway. ğŸ† (And let's be honest, I can't win against you even if I tried! ğŸ¤¡)
<br>
* **The fire in you when you're angry** ğŸ”¥ (it's honesty).
* **Even the way you nag** ğŸ—£ï¸ â€” because I know you care.
<br>
* **I cherish every single part of you.** â¤ï¸
</div>
<button class="btn" onclick="show('step5')">View Memory Album ğŸ“¸</button>
</div>

<div id="step5" class="panel hidden">
<h2><i class="fas fa-book-open"></i> A Trip Down Memory Lane</h2>
<p class="muted">A few moments I cherish deeply.</p>
<button class="btn" onclick="loadPhoto('step5a', 'birthday-photo-1.jpeg', 'That evening you visited. This is my favorite view in the world.')">See Memory 1</button>
</div>

<div id="step5a" class="panel hidden">
<h2>Memory 1/3</h2>
<img id="photo-5a" class="photo" style="display:none">
<p id="photoMsg-5a" class="small">Loading special momentâ€¦</p>
<p id="caption-5a" class="muted"></p>
<button class="btn" onclick="loadPhoto('step5b', 'birthday-photo-2.jpeg', 'The video call where you looked like a total gangster. Still beautiful.')">Next Memory</button>
</div>

<div id="step5b" class="panel hidden">
<h2>Memory 2/3</h2>
<img id="photo-5b" class="photo" style="display:none">
<p id="photoMsg-5b" class="small">Loading special momentâ€¦</p>
<p id="caption-5b" class="muted"></p>
<button class="btn" onclick="loadPhoto('step5c', 'birthday-photo-3.jpeg', 'Just another reason why I love talking to you every day.')">Last Memory</button>
</div>

<div id="step5c" class="panel hidden">
<h2>Memory 3/3</h2>
<img id="photo-5c" class="photo" style="display:none">
<p id="photoMsg-5c" class="small">Loading special momentâ€¦</p>
<p id="caption-5c" class="muted"></p>
<button class="btn" onclick="show('step6')">Time for Your Wish!</button>
</div>

<div id="step6" class="panel hidden">
<h2><i class="fas fa-wand-magic-sparkles"></i> Your Birthday Wish</h2>
<p class="muted">Make your wish here, Ruhh.</p>
<textarea id="wish" placeholder="Your wish..."></textarea>
<textarea id="note" placeholder="Your note (optional)"></textarea>
<button class="btn" id="save">Save Your Wish</button>
</div>

<div id="step6_5" class="panel hidden">
<h2><i class="fas fa-gifts"></i> And finally...</h2>
<div class="final-message">
  <p style="white-space:pre-wrap;color:var(--title-color);font-size:17px;font-weight:600; margin:0;">
    **Happy Birthday, My Sweet Ruhh.** ğŸ‚
    You possess a beautiful mind and a wit sharper than mine. 
    Celebrating this day by your side is my favorite win. ğŸ’–
  </p>
</div>
<button class="btn" onclick="show('step7')">Reveal My Gift ğŸ</button>
</div>

<div id="step7" class="panel hidden">
<h2>My Gift To You ğŸ</h2>
<p class="muted">Tap a box to reveal your invitation!</p>
<div class="gifts">
  <div class="gift">ğŸ</div>
  <div class="gift">ğŸ</div>
  <div class="gift">ğŸ</div>
</div>
<div id="result"></div>
</div>

<script>
const VALID_INPUTS = ["ruhh", "ruhamah"];
const ADMIN_PASS = "R28-OnlyForUs-2025";
const TARGET_MONTH = 11, TARGET_DAY = 28;

const el = id => document.getElementById(id);
const show = id => {
  document.querySelectorAll('.panel').forEach(p => p.classList.add('hidden'));
  el(id).classList.remove('hidden');
};
const confettiBurst = () => {
    confetti({particleCount:150,spread:90,origin:{y:0.6}});
};

function loadPhoto(stepId, filename, captionText) {
    show(stepId);
    const suffix = stepId.slice(4); 
    const imgEl = el('photo-' + suffix), msgEl = el('photoMsg-' + suffix), captionEl = el('caption-' + suffix);
    imgEl.style.display = 'none'; msgEl.style.display = 'block';
    imgEl.src = "birthday/" + filename;
    imgEl.onload = () => { imgEl.style.display = 'block'; msgEl.style.display = 'none'; captionEl.textContent = captionText; };
    imgEl.onerror = () => { msgEl.textContent = "Photo error. Check folder 'birthday' for " + filename; captionEl.textContent = captionText; };
}

function tick(){
  const now = new Date(), t = new Date(now.getFullYear(), TARGET_MONTH, TARGET_DAY);
  if (t < now) t.setFullYear(t.getFullYear() + 1);
  const diff = Math.max(0, (t - now) / 1000);
  el('d').textContent = Math.floor(diff / 86400); el('h').textContent = Math.floor(diff % 86400 / 3600);
  el('m').textContent = Math.floor(diff % 3600 / 60); el('s').textContent = Math.floor(diff % 60);
  if(now.getMonth() == TARGET_MONTH && now.getDate() == TARGET_DAY){ el('openNow').classList.remove('hidden'); el('locked').classList.add('hidden'); }
}
setInterval(tick, 1000); tick();

let adminTaps = 0;
el('step0').addEventListener('click', () => {
  adminTaps++;
  setTimeout(() => adminTaps = 0, 4000);
  if(adminTaps >= 7){
    if(prompt("Admin Password:") === ADMIN_PASS){ confettiBurst(); show('step1'); }
  }
});

el('openNow').onclick = () => show('step1');

el('nameBtn').onclick = () => {
  const userInput = el('nameInput').value.trim().toLowerCase();
  if(!VALID_INPUTS.includes(userInput)){ 
    el('nameHint').textContent = "That's not what I call you! ğŸ§"; 
    return; 
  }
  confettiBurst(); 
  show('step2');
};

// MUSIC TRIGGER ON BIRTHDAY GREETING
el('save').onclick = () => { 
  if(!wish.value) return alert("Make a wish!"); 
  
  // Start Music
  const music = el('bgMusic');
  music.play().catch(e => console.log("User must click for audio"));
  
  // Continuous confetti for the big reveal
  var end = Date.now() + (3 * 1000);
  (function frame() {
    confetti({ particleCount: 3, angle: 60, spread: 55, origin: { x: 0 } });
    confetti({ particleCount: 3, angle: 120, spread: 55, origin: { x: 1 } });
    if (Date.now() < end) { requestAnimationFrame(frame); }
  }());

  show('step6_5'); 
};

document.querySelectorAll('.gift').forEach(g => {
  g.onclick = () => {
    document.querySelectorAll('.gift').forEach(x => x.classList.add('hide'));
    g.classList.remove('hide');
    el('result').innerHTML = `<p style="font-size:16px;"><b>Dinner Invitation â¤ï¸</b><br>Tourist Cafe, Dalgaon Viewpoint<br>6:30 â€“ 7:00 PM<br><br><i>(P.S. Since I invited you, the treat is on you! Fair deal? ğŸ˜‰)</i></p>`;
    confettiBurst();
  };
});
show('step0');
</script>
</body>
</html>
