<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>For the one with the sweetest smile ‚ù§Ô∏è</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
:root{
  --bg1:#ffe0f0; --bg2:#f7b7cf;
  --accent1:#e57399; --accent2:#cc507e;
  --card:#fff7fb; --muted:#7d6a71;
  --title-color:#8b455d; 
}
@keyframes slideIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes softPulse {
  0% { transform: scale(1); box-shadow: 0 15px 40px rgba(0,0,0,.12); }
  50% { transform: scale(1.005); box-shadow: 0 16px 45px rgba(0,0,0,.15); } 
  100% { transform: scale(1); box-shadow: 0 15px 40px rgba(0,0,0,.12); }
}
html,body{
  min-height:100%; margin:0;
  font-family:system-ui, sans-serif;
  background:linear-gradient(135deg,var(--bg1),var(--bg2));
  display:flex; align-items:center; justify-content:center;
  padding: 20px 0;
}

.panel{
  width: 90%; 
  max-width: 500px; /* Increased from 400px to prevent narrow look */
  background:var(--card);
  border-radius:22px;
  padding:30px;
  text-align:center;
  display:flex; flex-direction:column; gap:18px;
  transition: all 0.3s ease;
  animation: slideIn 0.5s ease-out;
  box-sizing: border-box;
  box-shadow: 0 20px 50px rgba(0,0,0,0.1);
}

.hidden{display:none}
h1,h2{
  margin:0; color:var(--title-color);
  font-weight: 800; line-height: 1.2;
}
.muted{color:var(--muted);font-size:15px; line-height: 1.5;}
.small{font-size:13px;color:var(--muted)}

.btn{
  background:linear-gradient(135deg,var(--accent1),var(--accent2));
  color:#fff; border:none;
  padding:15px 25px; border-radius:999px;
  font-weight:700; cursor:pointer;
  transition:transform .2s;
  width: fit-content; align-self: center;
  margin-top: 10px;
}
.btn:hover{ transform:scale(1.05); }

input, textarea {
  width: 100%; padding: 14px;
  border-radius: 12px; border: 1.5px solid #f0e0e8;
  box-sizing: border-box; font-family: inherit; text-align: center;
  background: #fff;
}

/* PHOTO FIXES */
.photo-container {
  width: 100%;
  display: flex;
  justify-content: center;
  padding: 10px 0;
}
.photo{
  max-width: 100%; /* Ensures it never goes out of the border */
  height: auto;
  max-height: 350px;
  border-radius: 15px;
  object-fit: contain;
  box-shadow: 0 8px 20px rgba(0,0,0,0.1);
  border: 5px solid white;
}

/* VIDEO BOX */
#bdayVideo {
  width: 100%;
  border-radius: 15px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.15);
  margin-bottom: 10px;
}

.countdown{display:flex; gap:10px; justify-content:center; flex-wrap: wrap;}
.cd{
  background:#fff; padding:12px;
  border-radius:14px; min-width:65px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.05);
}
.cd div{font-size:1.5em; font-weight:bold; color:var(--accent2)}

.final-message {
  padding: 20px;
  border: 2px dashed var(--accent1); 
  border-radius: 15px;
  background: #fff0f6; 
  line-height: 1.6;
}
</style>
</head>
<body>

<audio id="bgMusic">
  <source src="song.mp3" type="audio/mpeg">
</audio>

<div id="step0" class="panel">
  <h1><i class="fas fa-calendar-day"></i> The Grand Countdown</h1>
  <div class="countdown">
    <div class="cd"><div id="d">0</div>days</div>
    <div class="cd"><div id="h">0</div>hrs</div>
    <div class="cd"><div id="m">0</div>min</div>
    <div class="cd"><div id="s">0</div>sec</div>
  </div>
  <p id="locked" class="muted">Unlocking on December 28th ‚ù§Ô∏è</p>
  <button id="openNow" class="btn hidden">Unlock Your Surprise üéâ</button>
  <p class="small">(Tap 7 times for admin access)</p>
</div>

<div id="step1" class="panel hidden">
  <h1><i class="fas fa-key"></i> Identify Yourself</h1>
  <p class="muted">Enter the name I call you by.</p>
  <input id="nameInput" placeholder="Enter name here...">
  <p id="nameHint" class="small"></p>
  <button id="nameBtn" class="btn">Continue</button>
</div>

<div id="step2" class="panel hidden">
  <h2>Hello, My Dear Ruhh <i class="fas fa-hand-sparkles"></i></h2>
  <p class="muted">This corner of the internet belongs to you today.</p>
  <button class="btn" onclick="show('step3')">Read My Message</button>
</div>

<div id="step3" class="panel hidden">
  <h2><i class="fas fa-envelope-open-text"></i> From My Heart...</h2>
  <p class="muted">I wanted to take a moment to tell you how much you mean to me.</p>
  <button class="btn" onclick="show('step4')">Continue</button>
</div>

<div id="step4" class="panel hidden">
  <h2><i class="fas fa-heart-circle-check"></i> My Favorite Things</h2>
  <div style="white-space:pre-wrap; color:var(--title-color); font-size:16px; font-weight:600; text-align:left; padding: 10px; display:flex; flex-direction:column; gap:12px;">
* The thoughtful way you talk. üí¨
* Your effortless laugh. üòÇ
* Your sweet smile that stops me. ‚ú®
* Your beautiful mind. üìö
<br>
* **I always lose to you...** üè≥Ô∏è because losing to you feels like winning. (And let's be real, I can't win anyway! ü§°)
  </div>
  <button class="btn" onclick="show('step5')">View Memory Album üì∏</button>
</div>

<div id="step5" class="panel hidden">
  <h2><i class="fas fa-book-open"></i> Memory Album</h2>
  <p class="muted">Just a few moments I keep close to my heart.</p>
  <button class="btn" onclick="loadPhoto('step5a', 'birthday-photo-1.jpeg', 'My favorite view.')">See Memory 1</button>
</div>

<div id="step5a" class="panel hidden">
  <h2>Memory 1/3</h2>
  <div class="photo-container"><img id="photo-5a" class="photo" style="display:none"></div>
  <p id="photoMsg-5a" class="small">Loading...</p>
  <p id="caption-5a" class="muted"></p>
  <button class="btn" onclick="loadPhoto('step5b', 'birthday-photo-2.jpeg', 'You looked like a total gangster here.')">Next Memory</button>
</div>

<div id="step5b" class="panel hidden">
  <h2>Memory 2/3</h2>
  <div class="photo-container"><img id="photo-5b" class="photo" style="display:none"></div>
  <p id="photoMsg-5b" class="small">Loading...</p>
  <p id="caption-5b" class="muted"></p>
  <button class="btn" onclick="loadPhoto('step5c', 'birthday-photo-3.jpeg', 'Just another reason I love you.')">Last Memory</button>
</div>

<div id="step5c" class="panel hidden">
  <h2>Memory 3/3</h2>
  <div class="photo-container"><img id="photo-5c" class="photo" style="display:none"></div>
  <p id="photoMsg-5c" class="small">Loading...</p>
  <p id="caption-5c" class="muted"></p>
  <button class="btn" onclick="show('step6')">Make a Wish!</button>
</div>

<div id="step6" class="panel hidden">
  <h2><i class="fas fa-wand-magic-sparkles"></i> Your Birthday Wish</h2>
  <textarea id="wish" placeholder="Type your wish..."></textarea>
  <textarea id="note" placeholder="Any note for me?"></textarea>
  <button class="btn" id="save">Save Your Wish</button>
</div>

<div id="step6_5" class="panel hidden">
  <h2>Happy Birthday, Ruhh! üéÇ</h2>
  <video id="bdayVideo" playsinline>
    <source src="birthday-video.mp4" type="video/mp4">
  </video>
  <div class="final-message">
    <p style="color:var(--title-color); font-size:16px; font-weight:600; margin:0;">
      May your year be as beautiful as your mind. üíñ
    </p>
  </div>
  <button class="btn" onclick="show('step7')">Reveal My Gift üéÅ</button>
</div>

<div id="step7" class="panel hidden">
  <h2>My Gift To You üéÅ</h2>
  <div style="display:flex; gap:10px; justify-content:center;">
    <div class="btn" onclick="revealGift()">üéÅ Open Gift</div>
  </div>
  <div id="result" style="margin-top:15px;"></div>
</div>

<script>
const VALID_INPUTS = ["ruhh", "ruhamah"];
const ADMIN_PASS = "R28-OnlyForUs-2025";
const TARGET_MONTH = 11, TARGET_DAY = 28;

const el = id => document.getElementById(id);
const show = id => {
  document.querySelectorAll('.panel').forEach(p => p.classList.add('hidden'));
  el(id).classList.remove('hidden');
  window.scrollTo(0, 0);
};

const confettiBurst = () => confetti({particleCount:150,spread:70,origin:{y:0.6}}); 

function loadPhoto(stepId, filename, captionText) {
    show(stepId);
    const suffix = stepId.slice(4); 
    const imgEl = el('photo-' + suffix), msgEl = el('photoMsg-' + suffix), captionEl = el('caption-' + suffix);
    imgEl.style.display = 'none'; msgEl.style.display = 'block';
    imgEl.src = "birthday/" + filename;
    imgEl.onload = () => { imgEl.style.display = 'block'; msgEl.style.display = 'none'; captionEl.textContent = captionText; };
    imgEl.onerror = () => { msgEl.textContent = "Photo error. Check folder 'birthday'"; };
}

function tick(){
  const now = new Date(), t = new Date(now.getFullYear(), TARGET_MONTH, TARGET_DAY);
  if (t < now) t.setFullYear(t.getFullYear() + 1);
  const diff = Math.max(0, (t - now) / 1000);
  el('d').textContent = Math.floor(diff / 86400); el('h').textContent = Math.floor(diff % 86400 / 3600);
  el('m').textContent = Math.floor(diff % 3600 / 60); el('s').textContent = Math.floor(diff % 60);
  if(now.getMonth() == TARGET_MONTH && now.getDate() == TARGET_DAY){ el('openNow').classList.remove('hidden'); el('locked').classList.add('hidden'); }
}
setInterval(tick, 1000); tick();

let adminTaps = 0;
el('step0').addEventListener('click', () => {
  adminTaps++;
  setTimeout(() => adminTaps = 0, 4000);
  if(adminTaps >= 7){
    if(prompt("Admin Password:") === ADMIN_PASS){ confettiBurst(); show('step1'); }
  }
});

el('openNow').onclick = () => show('step1');
el('nameBtn').onclick = () => {
  if(VALID_INPUTS.includes(el('nameInput').value.trim().toLowerCase())){
    confettiBurst(); show('step2');
  } else { el('nameHint').textContent = "That's not the name I use! üßê"; }
};

el('save').onclick = () => { 
  if(!el('wish').value) return alert("Make a wish first!");
  el('bgMusic').play();
  el('bdayVideo').play();
  confettiBurst();
  show('step6_5'); 
};

function revealGift() {
  el('result').innerHTML = `<div class="final-message"><b>Dinner Invitation ‚ù§Ô∏è</b><br>Tourist Cafe, Dalgaon Viewpoint<br>6:30 ‚Äì 7:00 PM<br><br><i>(P.S. Since I invited you, the treat is on you! Fair deal? üòâ)</i></div>`;
  confettiBurst();
}

show('step0');
</script>
</body>
</html>
